<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Storage Module - Content</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.2  (Linux)">
	<META NAME="CREATED" CONTENT="20060410;13011800">
	<META NAME="CHANGED" CONTENT="20060412;18225200">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P>&lt;content/&gt; represents a data stored on block device. Every
&lt;block_device/&gt; has a content.
</P>
<P>There are four types of contents:</P>
<UL>
	<LI><P>filesystem</P>
	<LI><P>mapper source</P>
	<LI><P>none</P>
	<LI><P>hidden</P>
</UL>
<P><BR><BR>
</P>
<P>Contents are manipulated by changing &lt;content/&gt; tag of
<A HREF="storage-bds.html">&lt;block_device/&gt;</A>, and submitting
&lt;block_device/&gt; to Storage Module using “modify_bd”
<A HREF="storage_api.html">function</A>.
</P>
<UL>
	<LI><P>Content properties are changed by modifying &lt;properties/&gt;
	tag.</P>
	<LI><P>Content is replaced, by some other content, by moving
	<A HREF="storage-content_template.html">&lt;content_template/&gt;</A>
	from &lt;available_contents/&gt; to &lt;new_content/&gt;, see
	bellow. It is module's responsibility to populate
	&lt;available_contents/&gt; with appropriate content_templates.</P>
</UL>
<P><BR><BR>
</P>
<P><B>Content XML description:</B></P>
<PRE><A NAME="line67"></A><FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;content type=&quot;content type&quot; ... other content identifying attributes ...&gt;</FONT></FONT>
   <FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;properties/&gt;</FONT></FONT>
   <FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;available_contents&gt;</FONT></FONT>
      <FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;content_template/&gt;</FONT></FONT>
      <FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;content_template/&gt;</FONT></FONT>
   <FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;/available_contents&gt;</FONT></FONT>
   <FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;new_content/&gt;</FONT></FONT>
<FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;/content&gt;</FONT></FONT>
</PRE>
<UL>
	<LI><P>Every &lt;content/&gt; has a “type”. Type can be one of:
	</P>
	<UL>
		<LI><P>“filesystem” - in which case “fs_type” attribute
		will be present. Currently supported filesystem types are: “swap”,
		“extended_fs” and “gfs”</P>
		<LI><P>“mapper_source” - in which case “mapper_type” and
		“mapper_id” attributes will be present. They define <A HREF="storage-mappers.html">&lt;mapper/&gt;</A>
		whose source this content is.
		</P>
		<LI><P>“none” - meaning that either useless data is present, or
		module is not able to properly detect it.
		</P>
		<LI><P>“hidden” - internal use, eg extended partition<BR><BR><BR>
		</P>
	</UL>
	<LI><P><A NAME="line49"></A>&lt;properties/&gt; tag, which has
	<A HREF="variables.html">variables</A> for children. <BR>Some
	properties can be mutable; modifying them and sending
	&lt;block_device/&gt; to Storage Module will commit changes to the
	disk. <BR>Contents have different set of properties defined.
	<BR>Example of properties for Extended Filesystem:
	</P>
	<UL>
		<PRE STYLE="margin-bottom: 0.2in"><A NAME="line671"></A><FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;properties&gt;</FONT></FONT></PRE>
		<UL>
			<PRE STYLE="margin-bottom: 0.2in"><FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;var mutable=&quot;true&quot; name=&quot;block_size&quot; type=&quot;int_select&quot; valid_values=&quot;1024;2048;4096&quot; value=&quot;4096&quot;/&gt;</FONT></FONT>
<FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;var mutable=&quot;true&quot; name=&quot;dir_index&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;</FONT></FONT>
<FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;var mutable=&quot;true&quot; name=&quot;has_journal&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;</FONT></FONT>
<FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;var illegal_chars=&quot;| \ /?.,&quot; max_length=&quot;16&quot; min_length=&quot;0&quot; mutable=&quot;true&quot; name=&quot;label&quot; reserved_words=&quot;&quot; type=&quot;string&quot; value=&quot;&quot;/&gt;</FONT></FONT>
<FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;var mutable=&quot;true&quot; name=&quot;fstab&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;</FONT></FONT>
<FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;var mutable=&quot;true&quot; name=&quot;mount&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;</FONT></FONT>
<FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;var illegal_chars=&quot;;? *!&quot; max_length=&quot;128&quot; min_length=&quot;0&quot; mutable=&quot;true&quot; name=&quot;mountpoint&quot; reserved_words=&quot;/;/boot;/dev/pts;/dev/shm;/proc;/sys;/usr;/music/remote;/music/local;/media/cdrecorder;/proc/bus/usb;/proc/sys/fs/binfmt_misc;/var/lib/nfs/rpc_pipefs;/home;/misc;/home/boston;/dev;/selinux&quot; type=&quot;string&quot; value=&quot;&quot;/&gt;</FONT></FONT></PRE>
		</UL>
		<PRE STYLE="margin-bottom: 0.2in"><FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;/properties&gt;</FONT></FONT></PRE>
	</UL>
	<LI><P><FONT FACE="Nimbus Roman No9 L"><FONT SIZE=3>&lt;new_content/&gt;,
	to which one of available content templates is moved. After
	submitting block device to Storage Module, current content will be
	replaced with this one. </FONT></FONT>
	</P>
	<LI><P><FONT SIZE=3><FONT FACE="Nimbus Roman No9 L">&lt;available_contents/&gt;
	contains none, one or more <A HREF="storage-content_template.html">&lt;content_template/&gt;</A>s
	which can replace current content. <BR></FONT></FONT>To replace
	current content, grab one of &lt;content_template/&gt;s, modify its
	properties, move it to &lt;new_content/&gt; and submit
	&lt;block_device/&gt; to Storage Module.
	</P>
</UL>
<P><BR><BR>
</P>
</BODY>
</HTML>
